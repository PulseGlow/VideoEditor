<Window x:Class="VideoEditor.Presentation.Views.AiSubtitleOptionsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="AI 字幕选项"
        WindowStartupLocation="CenterOwner"
        SizeToContent="WidthAndHeight"
        ResizeMode="NoResize"
        WindowStyle="ToolWindow"
        MinWidth="480"
        Background="{DynamicResource Brush.WindowBackground}"
        Foreground="{DynamicResource Brush.TextPrimary}">
    <Border Padding="18" 
            Background="{DynamicResource Brush.PanelBackground}" 
            BorderBrush="{DynamicResource Brush.PanelBorder}" 
            BorderThickness="1">
        <StackPanel>
            <TextBlock Text="AI 字幕生成选项" 
                       FontSize="18" 
                       FontWeight="Bold" 
                       Margin="0,0,0,16"
                       Foreground="{DynamicResource Brush.TextPrimary}"/>

            <CheckBox x:Name="EnableOptimizationCheckBox" 
                      Content="启用字幕优化" 
                      FontSize="13" 
                      Margin="0,0,0,12"
                      Foreground="{DynamicResource Brush.TextPrimary}"
                      ToolTip="使用 LLM 对字幕进行智能校正（错别字、标点、格式等）"/>
            
            <StackPanel Margin="0,0,0,12" IsEnabled="{Binding IsChecked, ElementName=EnableOptimizationCheckBox}">
                <TextBlock Text="优化提示词（可选）：" 
                           FontWeight="Bold" 
                           Margin="0,0,0,4"
                           Foreground="{DynamicResource Brush.TextPrimary}"/>
                <TextBox x:Name="OptimizationPromptTextBox" 
                         MinHeight="80" 
                         MaxHeight="150"
                         TextWrapping="Wrap"
                         AcceptsReturn="True"
                         VerticalScrollBarVisibility="Auto"
                         Padding="6"
                         FontSize="12"
                         Background="{DynamicResource Brush.ControlBackground}"
                         Foreground="{DynamicResource Brush.TextPrimary}"
                         BorderBrush="{DynamicResource Brush.ControlBorder}"/>
                <TextBlock Text="例如：统一专业术语、规范代码格式等" 
                           FontSize="11" 
                           Opacity="0.7" 
                           Margin="0,4,0,0"
                           Foreground="{DynamicResource Brush.TextSecondary}"/>
            </StackPanel>

            <Separator Margin="0,8,0,12"/>

            <CheckBox x:Name="EnableChunkingCheckBox" 
                      Content="启用音频分块处理" 
                      FontSize="13" 
                      Margin="0,0,0,8" 
                      IsChecked="True"
                      Foreground="{DynamicResource Brush.TextPrimary}"
                      ToolTip="长视频自动分块，避免 API 超时"/>
            
            <CheckBox x:Name="EnableCacheCheckBox" 
                      Content="启用结果缓存" 
                      FontSize="13" 
                      Margin="0,0,0,16" 
                      IsChecked="True"
                      Foreground="{DynamicResource Brush.TextPrimary}"
                      ToolTip="缓存转录结果，避免重复处理"/>

            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,8,0,0">
                <Button Content="取消" 
                        Width="90" 
                        Margin="0,0,8,0" 
                        Click="CancelButton_Click"
                        Foreground="{DynamicResource Brush.TextPrimary}"
                        Style="{DynamicResource ButtonSecondaryStyle}"/>
                <Button Content="确定" 
                        Width="110" 
                        Click="OkButton_Click"
                        Foreground="{DynamicResource Brush.TextPrimary}"
                        Style="{DynamicResource ButtonPrimaryStyle}"/>
            </StackPanel>
        </StackPanel>
    </Border>
</Window>

