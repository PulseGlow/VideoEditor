<Window x:Class="VideoEditor.Presentation.Views.FasterWhisperConfigWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Faster Whisper 配置"
        WindowStartupLocation="CenterOwner"
        SizeToContent="WidthAndHeight"
        ResizeMode="NoResize"
        WindowStyle="ToolWindow"
        MinWidth="520"
        Background="{DynamicResource Brush.WindowBackground}"
        Foreground="{DynamicResource Brush.TextPrimary}">
    <Border Padding="18" 
            Background="{DynamicResource Brush.PanelBackground}" 
            BorderBrush="{DynamicResource Brush.PanelBorder}" 
            BorderThickness="1">
        <StackPanel>
            <TextBlock Text="Faster Whisper 本地引擎配置" 
                       FontSize="18" 
                       FontWeight="Bold" 
                       Margin="0,0,0,16"
                       Foreground="{DynamicResource Brush.TextPrimary}"/>

            <TextBlock Text="1. 程序路径 (faster-whisper.exe)" 
                       FontWeight="Bold"
                       Foreground="{DynamicResource Brush.TextPrimary}"/>
            <DockPanel Margin="0,4,0,10">
                <TextBox x:Name="ProgramPathTextBox" 
                         MinWidth="360" 
                         Padding="6"
                         Background="{DynamicResource Brush.ControlBackground}"
                         Foreground="{DynamicResource Brush.TextPrimary}"
                         BorderBrush="{DynamicResource Brush.ControlBorder}"/>
                <Button Content="浏览..." 
                        Width="80" 
                        Margin="6,0,0,0" 
                        Click="BrowseProgramButton_Click"
                        Foreground="{DynamicResource Brush.TextPrimary}"
                        Style="{DynamicResource ButtonSecondaryStyle}"/>
            </DockPanel>

            <TextBlock Text="2. 模型库根目录 (包含多个模型子文件夹)" 
                       FontWeight="Bold"
                       Foreground="{DynamicResource Brush.TextPrimary}"/>
            <DockPanel Margin="0,4,0,10">
                <TextBox x:Name="ModelDirTextBox" 
                         MinWidth="360" 
                         Padding="6"
                         Background="{DynamicResource Brush.ControlBackground}"
                         Foreground="{DynamicResource Brush.TextPrimary}"
                         BorderBrush="{DynamicResource Brush.ControlBorder}"/>
                <Button Content="选择文件夹..." 
                        Width="100" 
                        Margin="6,0,0,0" 
                        Click="BrowseModelDirButton_Click"
                        Foreground="{DynamicResource Brush.TextPrimary}"
                        Style="{DynamicResource ButtonSecondaryStyle}"/>
            </DockPanel>

            <TextBlock Text="3. 选择 Faster Whisper 模型 (子文件夹名称)" 
                       FontWeight="Bold"
                       Foreground="{DynamicResource Brush.TextPrimary}"/>
            <DockPanel Margin="0,4,0,10">
                <ComboBox x:Name="ModelComboBox"
                          MinWidth="360"
                          Padding="4"
                          DisplayMemberPath="."
                          Background="{DynamicResource Brush.ControlBackground}"
                          Foreground="{DynamicResource Brush.TextPrimary}"
                          BorderBrush="{DynamicResource Brush.ControlBorder}"/>
                <Button Content="刷新" 
                        Width="60" 
                        Margin="6,0,0,0" 
                        Click="RefreshModelListButton_Click"
                        Foreground="{DynamicResource Brush.TextPrimary}"
                        Style="{DynamicResource ButtonSecondaryStyle}"/>
            </DockPanel>

            <TextBlock Text="4. 运行设备" 
                       FontWeight="Bold"
                       Foreground="{DynamicResource Brush.TextPrimary}"/>
            <ComboBox x:Name="DeviceComboBox"
                      Margin="0,4,0,10"
                      Padding="4"
                      MinWidth="200"
                      Background="{DynamicResource Brush.ControlBackground}"
                      Foreground="{DynamicResource Brush.TextPrimary}"
                      BorderBrush="{DynamicResource Brush.ControlBorder}">
                <ComboBoxItem Content="cpu"/>
                <ComboBoxItem Content="cuda"/>
            </ComboBox>

            <TextBlock Text="提示：可参考 VideoCaptioner 的 FasterWhisper 下载页面选择 GPU/CPU 版本模型，然后在此处指定程序和模型所在目录。"
                       FontSize="11" 
                       Opacity="0.7" 
                       TextWrapping="Wrap" 
                       Margin="0,0,0,10"
                       Foreground="{DynamicResource Brush.TextSecondary}"/>

            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,12,0,0">
                <Button Content="取消" 
                        Width="90" 
                        Margin="0,0,8,0" 
                        Click="CancelButton_Click"
                        Foreground="{DynamicResource Brush.TextPrimary}"
                        Style="{DynamicResource ButtonSecondaryStyle}"/>
                <Button Content="确定" 
                        Width="110" 
                        Click="OkButton_Click"
                        Foreground="{DynamicResource Brush.TextPrimary}"
                        Style="{DynamicResource ButtonPrimaryStyle}"/>
            </StackPanel>
        </StackPanel>
    </Border>
</Window>